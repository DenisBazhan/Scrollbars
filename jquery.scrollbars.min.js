/*! jQuery Scrollbars | License: https://github.com/nathggns/Scrollbars/blob/master/LICENSE */
(function(b){var a={init:function(){ele=this;overflow=this.css("overflow");overflowX=this.css("overflow-x");overflowY=this.css("overflow-y");need=overflow=="auto"||overflow=="scroll";need=need||overflowX=="auto"||overflowX=="scroll";need=need||overflowY=="auto"||overflowY=="scroll";if(!need){return}allImgs=this.find("img");allImgsLength=allImgs.length;allImgsLoaded=0;if(allImgsLength==0){a.prepare.call(ele)}else{allImgs.each(function(){image=new Image;b(image).data("ele",ele).data("imgs",[allImgsLength,allImgsLoaded]).bind("load",function(){imgs=b(this).data("imgs");imgs[1]++;if(imgs[1]==imgs[0]){a.prepare.call(b(this).data("ele"))}b(this).data("imgs",imgs)});image.src=this.src})}},prepare:function(){ele=this;if(this.css("position")=="static"){this.css("position","relative")}this.css("overflow","hidden");id="scroll-"+Math.floor(Math.random()*100000);yPadding=this.data("opts")["yPadding"];xPadding=this.data("opts")["xPadding"];this.addClass("scrollRoot").addClass(id);rootWrap=b(document.createElement("div"));rootWrap.addClass(id).addClass("rootWrap").html(this.html()).css({height:this.height()-xPadding,width:this.width()-yPadding});contentWrap=b(document.createElement("div"));contentWrap.addClass(id).addClass("contentWrap").html(rootWrap.html()).css({"float":"left",padding:0});rootWrap.html("").append(contentWrap);this.html("").append(rootWrap);if(rootWrap.height()>contentWrap.height()&&rootWrap.width()>contentWrap.width()){this.html(contentWrap.html())}a.generate.call(this,id,"Y");a.generate.call(this,id,"X");a.addEvents.call(this,id,"Y");a.addEvents.call(this,id,"X")},generate:function(d,c){contentWrap=this.find(".contentWrap");rootWrap=this.find(".rootWrap");dragCon=b(document.createElement("div"));dragCon.addClass(d).addClass("dragCon"+c);this.append(dragCon);if(c=="Y"){yPadding=this.data("opts")["yPadding"];if((rootWrap.height()+yPadding)>contentWrap.height()){rootWrap.css({height:rootWrap.height()+yPadding});return false}ratio=dragCon.height()/contentWrap.height();dragSize=this.data("opts")["draggerheight"];dragSize=dragSize=="auto"?+(rootWrap.height()*ratio):dragSize;dragSize=dragSize<10?10:dragSize;dragSize=dragSize>dragCon.height()?dragCon.height()-10:dragSize}else{xPadding=this.data("opts")["xPadding"];if((rootWrap.width()+xPadding)>contentWrap.width()){rootWrap.css({height:rootWrap.width()+xPadding});return false}else{contentWrap.height(contentWrap.height()-5)}ratio=dragCon.width()/contentWrap.width();dragSize=this.data("opts")["draggerwidth"];dragSize=dragSize=="auto"?+(rootWrap.width()*ratio):dragSize;dragSize=dragSize<10?10:dragSize;dragSize=dragSize>dragCon.width()?dragCon.width()-10:dragSize}drag=b(document.createElement("div"));drag.addClass(d).addClass("drag"+c).addClass("drag");if(c=="Y"){drag.css({height:dragSize})}else{drag.css({width:dragSize})}drag.data("id",d);dragCon.append(drag);if(this.data("opts")["autohide"]){drag.fadeTo(0,0)}return true},addEvents:function(d,c){ele=this;drag=this.find(".drag"+c);dragCon=drag.parent();rootWrap=this.find(".rootWrap");contentWrap=this.find(".contentWrap");drag.mousedown(function(e){if(c=="Y"){b(this).data("move",e.pageY)}else{b(this).data("move",e.pageX)}b("body").addClass("scrollingActive");e.preventDefault();return false});b("*").mouseup(function(e){b(".drag"+c).data("move",false);b("body").removeClass("scrollingActive")}).mousemove(function(e){b(".drag"+c).each(function(){if(b(this).data("move")){ele=b(".scrollRoot."+b(this).data("id"));if(c=="Y"){a.move.call(ele,e.pageY-b(this).data("move"),c);b(this).data("move",e.pageY)}else{a.move.call(ele,e.pageX-b(this).data("move"),c);b(this).data("move",e.pageX)}e.preventDefault()}})});if(b().mousewheel){this.mousewheel(function(g,h,f,e){if(f==0){a.move.call(b(this),-e*1.5,"Y")}else{a.move.call(b(this),f*2,"X")}g.preventDefault()})}if(this.data("opts")["mousedrag"]){this.find(".rootWrap").css({cursor:this.data("opts")["mousedragcursor"]}).mousedown(function(e){b(this).data("move",[e.pageX,e.pageY]);return false});b("*").mousemove(function(e){b(".rootWrap").each(function(){if(b(this).data("move")){x=b(this).data("move")[0];y=b(this).data("move")[1];dX=e.pageX-x;dY=e.pageY-y;b(this).data("move",[e.pageX,e.pageY]);a.move.call(b(this).parent(),-dX,"X");a.move.call(b(this).parent(),-dY,"Y");e.preventDefault()}}).mouseup(function(f){b(".rootWrap").each(function(){b(this).data("move",false)})})});b(window).mouseout(function(e){b(".rootWrap").each(function(){b(this).data("move",false)})})}if(this.data("opts")["clicktoscroll"]){dragCon.data("axis",c).click(function(e){c=b(this).data("axis");srcElement=b(e.srcElement);drag=b(this).children().eq(0);ele=b(".scrollRoot."+drag.data("id"));if(srcElement.hasClass("drag"+c)){return}if(c=="Y"){offset=e.pageY;offset=offset-(drag.height()/2);offset=offset-drag.offset().top}else{offset=e.pageX;offset=offset-(drag.width()/2);offset=offset-drag.offset().left}a.move.call(ele,offset,c);e.preventDefault()})}if(this.data("opts")["autohide"]){this.hover(function(){b(this).find(".drag").fadeTo(400,1)},function(){b(this).find(".drag").fadeTo(400,0)})}},move:function(d,c){drag=this.find(".drag"+c);dragCon=drag.parent();rootWrap=this.find(".rootWrap");contentWrap=this.find(".contentWrap");if(c=="Y"){current=drag.css("top");current=current=="auto"?0:parseFloat(current);distance=current+d;min=0;max=dragCon.height()-drag.height();if(distance<min){distance=min}if(distance>max){distance=max}drag.css({top:distance});trackDistance=dragCon.height()-drag.height();notVisible=(contentWrap.height()-rootWrap.parent().height());distanceRatio=notVisible/trackDistance;distance=(distance*distanceRatio)*-1;contentWrap.css({top:distance})}else{current=drag.css("left");current=current=="auto"?0:parseFloat(current);distance=current+d;min=0;max=dragCon.width()-drag.width();if(distance<min){distance=min}if(distance>max){distance=max}drag.css({left:distance});trackDistance=dragCon.width()-drag.width();notVisible=(contentWrap.width()-rootWrap.parent().width());distanceRatio=notVisible/trackDistance;distance=(distance*distanceRatio)*-1;contentWrap.css({left:distance})}}};b.fn.scrollbars=function(d){var c=b.fn.extend(b.fn.scrollbars.defaults,d);return this.each(function(){b(this).data("opts",c);a.init.call(b(this))})};b.fn.scrollbars.defaults={yPadding:20,xPadding:20,mousewheel:true,mousedrag:false,mousedragcursor:"move",clicktoscroll:true,draggerheight:"auto",draggerwidth:"auto",autohide:false};b.fn.scrollbars.methods=a})(jQuery);