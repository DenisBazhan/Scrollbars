/*! jQuery Scrollbars | License: https://github.com/nathggns/Scrollbars/blob/master/LICENSE */
(function(b){function a(){var c={};var d={yPadding:"auto",xPadding:"auto",mousewheel:true,mousedrag:false,mousedragcursor:"move",clicktoscroll:true,draggerheight:"auto",draggerwidth:"auto",autohide:false,touch:true,blackberry:true};this.init=function(f){var e={init:function(p){var h=b.extend(d,p);c[this]={opts:h,ele:this};var o=this;var i=this.css("overflow"),k=this.css("overflow-x"),j=this.css("overflow-y"),m=i=="auto"||i=="scroll";m=m||k=="auto"||k=="scroll";m=m||j=="auto"||j=="scroll";if(!m){return}var l=this.find("img"),n=l.length,g=0;if(n==0){e.prepare.call(this)}else{c[this]["imgs"]={eles:l,length:n,load:g};b.each(l,function(r,q){image=new Image;c[image]=o;b(image).bind("load error",function(){c[c[this]].imgs.load++;if(c[c[this]].imgs.load==c[c[this]].imgs.length){e.prepare.call(c[c[this]].ele)}});image.src=q.src})}},prepare:function(){var j=this;if(this.css("position")=="static"){this.css("position","relative")}id="scroll-"+Math.floor(Math.random()*100000);this.addClass(id).addClass("scrollRoot");c[this].id=id;var i=c[this].opts.xPadding,h=c[this].opts.yPadding;if(i=="auto"){temp=b(document.createElement("div"));temp.addClass("dragConX");b("body").append(temp);i=c[this].opts.xPadding=parseFloat(temp.outerHeight());temp.remove()}if(h=="auto"){temp=b(document.createElement("div"));temp.addClass("dragConY");b("body").append(temp);h=c[this].opts.yPadding=parseFloat(temp.outerWidth());temp.remove()}var k=b(document.createElement("div"));k.addClass(id).addClass("contentWrap");this.wrapInner(k);var k=this.find(".contentWrap");c[this].contentWrap=k;var g=b(document.createElement("div"));g.addClass(id).addClass("rootWrap");this.wrapInner(g);var g=this.find(".rootWrap");c[this].rootWrap=g;g.css({width:this.width()-h,height:this.height()-i});if(g.height()>k.height()&&g.width()>k.width()){this.html(k.html());this.removeClass(id).removeClass("scrollRoot")}if(e.generate.call(this,"X")){e.addEvents.call(this,"X",c[this].id)}if(e.generate.call(this,"Y")){e.addEvents.call(this,"Y",c[this].id)}},generate:function(i){var j=c[this].contentWrap,g=c[this].rootWrap,h=c[this].id;var p=b(document.createElement("div"));p.addClass(h).addClass("dragCon"+i);this.append(p);c[this][i]={dragCon:p};if(i=="X"){var n=c[this].opts.xPadding;if((g.width()+n)>=j.width()){g.css({height:g.height()+n});return false}var l=p.width()/j.width();var o=c[this].opts.draggerwidth;o=o=="auto"?+(p.width()*l):o;o=o<10?10:o;o=o>(p.width()-10)?p.width()-10:o}else{var m=c[this].opts.yPadding;if((g.height()+m)>j.height()){g.css({width:g.width()+m});return false}var l=p.height()/j.height();var o=c[this].opts.draggerheight;o=o=="auto"?+(p.height()*l):o;o=o<10?10:o;o=o>(p.height()-10)?p.height()-10:o}var k=b(document.createElement("div"));k.addClass(h).addClass("drag"+i).addClass("drag");c[this][i].drag=k;if(i=="X"){k.css({width:o})}else{k.css({height:o})}p.append(k);if(c[this].opts.autohide){k.fadeTo(0,0)}return true},addEvents:function(i,j){ele=this;drag=c[this][i].drag;dragCon=c[this][i].dragCon;var g={dragMouseDown:function(k){if(i=="X"){b(this).data("move",k.pageX)}else{b(this).data("move",k.pageY)}b(this).addClass("active");b("body").addClass("scrollingActive");k.preventDefault();return false},scrollStarMouseMove:function(k){b(".scrollRoot").each(function(){var l=b(this).find(".drag"+i);if(l.data("move")){if(i=="X"){var m=k.pageX-l.data("move");e.move.call(b(this),m,i);l.data("move",k.pageX)}else{var m=k.pageY-l.data("move");e.move.call(b(this),m,i);l.data("move",k.pageY)}}})},scrollStarMouseUp:function(k){b(".dragX, .dragY").data("move",false)},mousewheel:function(m,n,l,k){if(i=="X"){e.move.call(b(this),l*10,i)}else{e.move.call(b(this),-k*10,i)}return false},clickScrollUp:function(l){if(b(l.srcElement).hasClass("drag")){return}if(!b(this).data("mousedown")){return}b(this).data("mousedown",false);var k=b(this).find(".drag");if(i=="X"){var m=l.pageX;m=m-k.offset().left;m=m-(k.width()/2);e.move.call(b(".scrollRoot."+j),m,i)}else{var m=l.pageY;m=m-k.offset().top;m=m-(k.height()/2);e.move.call(b(".scrollRoot."+j),m,i)}l.preventDefault();return false},clickScrollDown:function(k){if(b(k.srcElement).hasClass("drag")){return}b(this).data("mousedown",true);k.preventDefault();return false},hideEnter:function(k){b(this).find(".drag").fadeTo(400,1)},hideOut:function(l){var k=b(this).find(".drag");if(!k.data("move")){k.fadeTo(400,0)}},mouseDragDown:function(k){b("html, body").css({cursor:c[b(this)].opts.mousedragcursor});b(this).data("move",[k.pageX,k.pageY]);k.preventDefault();return false},mouseDragStarMove:function(k){b(".scrollRoot").each(function(){if(b(this).data("move")){x=b(this).data("move")[0];y=b(this).data("move")[1];dX=k.pageX-x;dY=k.pageY-y;e.move.call(b(this),-dX,"X");e.move.call(b(this),-dY,"Y");b(this).data("move",[k.pageX,k.pageY])}})},mouseDragStarUp:function(k){b("html, body").css({cursor:"auto"});b(".scrollRoot").each(function(){b(this).data("move",false)})},onTouchStart:function(k){if(k.targetTouches.length==1){b(this).data("start",[k.targetTouches[0].pageX,k.targetTouches[0].pageY])}else{b(this).data("start",false)}},onTouchEnd:function(k){if(k.targetTouches.length==1){b(this).data("start",[k.targetTouches[0].pageX,k.targetTouches[0].pageY])}else{b(this).data("start",false)}},onTouchMove:function(k){if(b(this).data("start")){startX=b(this).data("start")[0];startY=b(this).data("start")[1];newX=k.targetTouches[0].pageX;newY=k.targetTouches[0].pageY;difX=newX-startX;difY=newY-startY;b(this).data("start",[newX,newY]);X=e.move.call(b(".scrollRoot."+j),-difX,"X");Y=e.move.call(b(".scrollRoot."+j),-difY,"Y");if(!X&&!Y){k.preventDefault()}}},bbMouseDown:function(k){if(b(this).data("move")){b(this).data("move",false)}else{if(i=="X"){b(this).data("move",k.pageX)}else{b(this).data("move",k.pageY)}}},ignore:function(){}};if(c[this].opts.blackberry&&navigator.userAgent.toLowerCase().search("blackberry")!=-1){g.scrollStarMouseUp=g.ignore;g.dragMouseDown=g.bbMouseDown}drag.mousedown(g.dragMouseDown);b("*").mousemove(g.scrollStarMouseMove).mouseup(g.scrollStarMouseUp);if(b().mousewheel&&c[this].opts.mousewheel){this.mousewheel(g.mousewheel)}if(c[this].opts.clicktoscroll){dragCon.mouseup(g.clickScrollUp).mousedown(g.clickScrollDown)}if(c[this].opts.autohide){this.hover(g.hideEnter,g.hideOut)}if(c[this].opts.mousedrag){this.mousedown(g.mouseDragDown);b("*").mousemove(g.mouseDragStarMove).mouseup(g.mouseDragStarUp);this.css({cursor:c[this].opts.mousedragcursor})}if(c[this].opts.touch){var h=this.get(0);h.ontouchstart=g.onTouchStart;h.ontouchend=g.onTouchEnd;h.ontouchmove=g.onTouchMove}},move:function(n,k){var p=this.find(".drag"+k);var t=this.find(".dragCon"+k);var l=this.find(".contentWrap");var i=this.find(".rootWrap");var s=false;if(k=="X"){var q=p.css("left")}else{var q=p.css("top")}q=(q=="auto")?0:parseFloat(q);var h=q+n;var m=0;if(k=="X"){var r=t.width()-p.width();if(h<m){h=m;s=true}if(h>r){h=r;s=true}p.css({left:h});var o=t.width()-p.width(),j=l.width()-i.width(),g=j/o,h=(h*g)*-1;l.css({left:h})}else{var r=t.height()-p.height();if(h<m){h=m}if(h>r){h=r}p.css({top:h});if(h==r){h=h-1}var o=t.height()-p.height(),j=l.height()-i.height(),g=j/o,h=(h*g)*-1;l.css({top:h})}return s}};e.init.call(b(this),f)}}b.fn.scrollbars=function(c){return this.each(function(){scroller=new a();scroller.init.call(this,c)})}})(jQuery);